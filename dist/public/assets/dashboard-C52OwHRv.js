import{j as e}from"./ui-B2QfF1wH.js";import{u as s,a}from"./query-DpQl2WP_.js";import{C as l,a as t,b as i,c as r}from"./card-Duc_CNra.js";import{c as n,e as o,g as d,f as c,S as m,T as x}from"./index-B96s3MY2.js";import{D as g,B as h,L as p,C as b,a as u,b as j,c as y,p as f,d as v,e as N,A as k,P as w,f as S}from"./charts-CWC3ycSS.js";import"./vendor-C1mj56OW.js";import"./pdf-QG3cfAWJ.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=n("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),A=n("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),B=n("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function M(){const n=s(),{toast:b}=o(),{data:u,isLoading:j}=a({queryKey:["/api/dashboard/stats"]}),{data:y,isLoading:f}=a({queryKey:["/api/dashboard/top-categories"]}),{data:v,isLoading:N}=a({queryKey:["/api/dashboard/monthly-activity"],staleTime:3e5,gcTime:6e5}),{data:k,isLoading:w}=a({queryKey:["/api/dashboard/weekly-books"],staleTime:12e4,gcTime:3e5}),S={labels:["Available","On Loan"],datasets:[{data:[(null==u?void 0:u.availableBooks)||0,(null==u?void 0:u.onLoan)||0],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(251, 146, 60, 1)"],borderWidth:2}]},M={labels:(null==y?void 0:y.map(e=>e.name))||[],datasets:[{label:"Books per Category",data:(null==y?void 0:y.map(e=>e.count))||[],backgroundColor:["rgba(59, 130, 246, 0.7)","rgba(168, 85, 247, 0.7)","rgba(236, 72, 153, 0.7)","rgba(34, 197, 94, 0.7)","rgba(251, 146, 60, 0.7)"],borderColor:["rgba(59, 130, 246, 1)","rgba(168, 85, 247, 1)","rgba(236, 72, 153, 1)","rgba(34, 197, 94, 1)","rgba(251, 146, 60, 1)"],borderWidth:2,borderRadius:8}]},L={labels:(null==v?void 0:v.map(e=>e.month))||["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Active Users",data:(null==v?void 0:v.map(e=>e.activeUsers))||[0,0,0,0,0,0],borderColor:"rgba(34, 197, 94, 0.8)",backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:3,fill:!0,tension:.4}]},F={labels:(null==k?void 0:k.map(e=>e.week))||["Category 1","Category 2","Category 3","Category 4","Category 5","Category 6","Category 7","Category 8"],datasets:[{label:"Books Added by Category",data:(null==k?void 0:k.map(e=>e.booksAdded))||[0,0,0,0,0,0,0,0],backgroundColor:["rgba(168, 85, 247, 0.8)","rgba(236, 72, 153, 0.8)","rgba(59, 130, 246, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)","rgba(168, 85, 247, 0.8)","rgba(236, 72, 153, 0.8)","rgba(59, 130, 246, 0.8)"],borderColor:["rgba(168, 85, 247, 1)","rgba(236, 72, 153, 1)","rgba(59, 130, 246, 1)","rgba(34, 197, 94, 1)","rgba(251, 146, 60, 1)","rgba(168, 85, 247, 1)","rgba(236, 72, 153, 1)","rgba(59, 130, 246, 1)"],borderWidth:2,borderRadius:8}]},z={responsive:!0,maintainAspectRatio:!1,animation:{duration:800,easing:"easeInOutQuart"},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{titleFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:13,weight:600},bodyFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:"normal"}}},scales:{y:{beginAtZero:!0,grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(100, 116, 139)"}},x:{grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(100, 116, 139)"}}}},P=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Last updated: ",e.jsx("span",{children:P})]}),e.jsxs(d,{onClick:()=>{n.invalidateQueries({queryKey:["/api/dashboard/stats"]}),n.invalidateQueries({queryKey:["/api/dashboard/top-categories"]}),n.invalidateQueries({queryKey:["/api/dashboard/monthly-activity"]}),n.invalidateQueries({queryKey:["/api/dashboard/weekly-books"]}),b({title:"Data refreshed",description:"Dashboard data has been updated"})},className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(l,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-primary",children:e.jsx(c,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Documents"}),j?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.totalBooks.toLocaleString())||0})]})]})})}),e.jsx(l,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-100 text-accent",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Available"}),j?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.availableBooks.toLocaleString())||0})]})]})})}),e.jsx(l,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-orange-100 text-orange-600",children:e.jsx(A,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"On Loan"}),j?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.onLoan.toLocaleString())||0})]})]})})}),e.jsx(l,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600",children:e.jsx(x,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Categories"}),j?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.categories)||0})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Collection Status"})}),e.jsx(t,{children:j?e.jsx(m,{className:"h-64 w-full"}):e.jsx("div",{className:"h-64",children:e.jsx(g,{data:S,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:500},color:"rgb(71, 85, 105)"}},tooltip:{titleFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:13,weight:600},bodyFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:"normal"}}}}})})})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Top Categories"})}),e.jsx(t,{children:f?e.jsx(m,{className:"h-64 w-full"}):e.jsx("div",{className:"h-64",children:e.jsx(h,{data:M,options:z})})})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Monthly User Activity"})}),e.jsx(t,{children:N?e.jsx(m,{className:"h-64 w-full"}):e.jsx("div",{className:"h-64",children:e.jsx(p,{data:L,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:1e3,easing:"easeInOutQuart"},interaction:{intersect:!1,mode:"index"},plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:500},color:"rgb(71, 85, 105)"}},tooltip:{titleFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:13,weight:600},bodyFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:"normal"}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(100, 116, 139)"}},y:{grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(100, 116, 139)"}}}}})})})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Books Added by Category"})}),e.jsx(t,{children:w?e.jsx(m,{className:"h-64 w-full"}):e.jsx("div",{className:"h-64",children:e.jsx(h,{data:F,options:z})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(r,{children:"Top 5 Book Categories"})}),e.jsx(t,{children:f?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(m,{className:"h-4 w-24"}),e.jsx(m,{className:"h-4 w-12"})]},a))}):e.jsx("div",{className:"space-y-4",children:null==y?void 0:y.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-slate-50 to-white border border-slate-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full text-white flex items-center justify-center text-sm font-medium "+(0===a?"bg-blue-500":1===a?"bg-purple-500":2===a?"bg-pink-500":3===a?"bg-green-500":"bg-orange-500"),children:a+1}),e.jsx("span",{className:"font-medium text-slate-900",children:s.name})]}),e.jsxs("span",{className:"text-sm text-slate-600 font-medium bg-slate-100 px-3 py-1 rounded-full",children:[s.count.toLocaleString()," books"]})]},s.id))})})]}),e.jsxs(l,{children:[e.jsx(i,{children:e.jsx(r,{children:"Library Analytics"})}),e.jsx(t,{children:j?e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{className:"h-24 w-full"}),e.jsx(m,{className:"h-24 w-full"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100",children:[e.jsxs("h4",{className:"font-medium text-slate-900 mb-3 flex items-center",children:[e.jsx(C,{className:"w-5 h-5 text-green-600 mr-2"}),"Collection Health"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Available Books:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:((null==u?void 0:u.availableBooks)||0)/((null==u?void 0:u.totalBooks)||1)*100+"%"}})}),e.jsxs("span",{className:"font-medium text-green-600 text-sm",children:[(((null==u?void 0:u.availableBooks)||0)/((null==u?void 0:u.totalBooks)||1)*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Books on Loan:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:((null==u?void 0:u.onLoan)||0)/((null==u?void 0:u.totalBooks)||1)*100+"%"}})}),e.jsxs("span",{className:"font-medium text-orange-600 text-sm",children:[(((null==u?void 0:u.onLoan)||0)/((null==u?void 0:u.totalBooks)||1)*100).toFixed(1),"%"]})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:[e.jsxs("h4",{className:"font-medium text-slate-900 mb-3 flex items-center",children:[e.jsx(x,{className:"w-5 h-5 text-blue-600 mr-2"}),"Quick Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600 block",children:"Avg. per category"}),e.jsx("p",{className:"font-bold text-lg text-blue-600",children:Math.round(((null==u?void 0:u.totalBooks)||0)/((null==u?void 0:u.categories)||1))})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600 block",children:"Collection size"}),e.jsx("p",{className:"font-bold text-lg text-purple-600",children:"Large"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-4",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600 block",children:"Site Visitors"}),e.jsx("p",{className:"font-bold text-lg text-green-600",children:(null==u?void 0:u.siteVisitorCount)??0})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600 block",children:"PDF Views"}),e.jsx("p",{className:"font-bold text-lg text-green-600",children:(null==u?void 0:u.pdfViewCount)??0})]})]})]})]})})]})]})]})]})}b.register(u,j,y,f,v,N,k,w,S),b.defaults.font.family='Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',b.defaults.font.size=12,b.defaults.font.weight="normal",b.defaults.color="rgb(71, 85, 105)";export{M as default};
