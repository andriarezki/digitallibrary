import{j as e}from"./ui-DM3Dsx1x.js";import{u as s,a}from"./query-DVbHB3bz.js";import{C as t,a as i,b as l,c as r}from"./card-Dr4r5Ffp.js";import{c as o,b as n,e as d,d as c,S as m,T as p}from"./index-C1GixXD0.js";import{B as h,L as x,D as g,C as b,a as u,b as y,c as j,p as f,d as v,e as N,A as w,P as k,f as S}from"./charts-CWC3ycSS.js";import{C as M}from"./circle-check-big-BXALibMQ.js";import"./vendor-C1mj56OW.js";import"./pdf-QG3cfAWJ.js";
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=o("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),A=o("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);
/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function F(){const o=s(),{toast:b}=n(),{data:u,isLoading:y}=a({queryKey:["/api/dashboard/stats"],staleTime:6e5,gcTime:12e5}),{data:j,isLoading:f}=a({queryKey:["/api/dashboard/top-categories"],staleTime:9e5,gcTime:18e5}),{data:v,isLoading:N}=a({queryKey:["/api/dashboard/monthly-activity"],staleTime:3e5,gcTime:6e5}),{data:w,isLoading:k}=a({queryKey:["/api/dashboard/monthly-loans"],staleTime:3e5,gcTime:6e5});a({queryKey:["/api/dashboard/weekly-books"],staleTime:12e4,gcTime:3e5});const{data:S,isLoading:F}=a({queryKey:["/api/dashboard/documents-by-department"],staleTime:6e5,gcTime:12e5}),{data:C,isLoading:L}=a({queryKey:["/api/dashboard/most-read-by-category"],staleTime:9e5,gcTime:18e5});null==j||j.map(e=>e.name),null==j||j.map(e=>e.count);const P={labels:(null==S?void 0:S.map(e=>e.department))||[],datasets:[{label:"Documents",data:(null==S?void 0:S.map(e=>e.count))||[],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)","rgba(251, 146, 60, 0.8)","rgba(236, 72, 153, 0.8)","rgba(14, 165, 233, 0.8)","rgba(139, 69, 19, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(59, 130, 246, 1)","rgba(168, 85, 247, 1)","rgba(251, 146, 60, 1)","rgba(236, 72, 153, 1)","rgba(14, 165, 233, 1)","rgba(139, 69, 19, 1)"],borderWidth:2,borderRadius:6}]},q={labels:(null==v?void 0:v.map(e=>e.month))||["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Site Visitors",data:(null==v?void 0:v.map(e=>e.activeUsers))||[0,0,0,0,0,0],borderColor:"rgba(34, 197, 94, 0.9)",backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"rgba(34, 197, 94, 1)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:5}]},T={labels:(null==w?void 0:w.map(e=>e.month))??[],datasets:[{label:"Books Borrowed",data:(null==w?void 0:w.map(e=>e.borrowed))??[],backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,borderRadius:6}]},z={labels:(null==C?void 0:C.map(e=>e.category))||[],datasets:[{data:(null==C?void 0:C.map(e=>e.views))||[],backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)","rgba(236, 72, 153, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgba(59, 130, 246, 1)","rgba(168, 85, 247, 1)","rgba(236, 72, 153, 1)","rgba(34, 197, 94, 1)","rgba(251, 146, 60, 1)"],borderWidth:2}]},H={responsive:!0,maintainAspectRatio:!1,animation:{duration:400,easing:"easeOutQuart"},interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{titleFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:600},bodyFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:"normal"}}},scales:{y:{beginAtZero:!0,grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:10,weight:500},color:"rgb(100, 116, 139)"}},x:{grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:10,weight:500},color:"rgb(100, 116, 139)"}}}},I=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4 sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Last updated: ",e.jsx("span",{children:I})]}),e.jsxs(d,{onClick:()=>{o.invalidateQueries({queryKey:["/api/dashboard/stats"]}),o.invalidateQueries({queryKey:["/api/dashboard/top-categories"]}),o.invalidateQueries({queryKey:["/api/dashboard/monthly-activity"]}),o.invalidateQueries({queryKey:["/api/dashboard/monthly-loans"]}),o.invalidateQueries({queryKey:["/api/dashboard/weekly-books"]}),o.invalidateQueries({queryKey:["/api/dashboard/documents-by-department"]}),o.invalidateQueries({queryKey:["/api/dashboard/most-read-by-category"]}),b({title:"Data refreshed",description:"Dashboard data has been updated"})},className:"bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(t,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-primary",children:e.jsx(c,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Total Documents"}),y?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.totalBooks.toLocaleString())||0})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-green-100 text-accent",children:e.jsx(M,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Available"}),y?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.availableBooks.toLocaleString())||0})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-orange-100 text-orange-600",children:e.jsx(B,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"On Loan"}),y?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.onLoan.toLocaleString())||0})]})]})})}),e.jsx(t,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600",children:e.jsx(p,{className:"w-6 h-6"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Categories"}),y?e.jsx(m,{className:"h-8 w-16 mt-1"}):e.jsx("p",{className:"text-2xl font-bold text-slate-900",children:(null==u?void 0:u.categories)||0})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs(t,{children:[e.jsx(l,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Top 5 Categories"})}),e.jsx(i,{children:f?e.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(s=>e.jsx(m,{className:"h-12 w-full"},s))}):e.jsxs("div",{className:"space-y-3",children:[null==j?void 0:j.slice(0,5).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-slate-200 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold "+(0===a?"bg-blue-500":1===a?"bg-purple-500":2===a?"bg-pink-500":3===a?"bg-green-500":"bg-orange-500"),children:a+1}),e.jsx("span",{className:"font-medium text-slate-700",children:s.name})]}),e.jsxs("span",{className:"text-sm font-semibold text-slate-600",children:[s.count.toLocaleString()," documents"]})]},s.id)),(!j||0===j.length)&&e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(c,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No category data available"})]})]})})]}),e.jsxs(t,{children:[e.jsx(l,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Documents by Department"})}),e.jsx(i,{children:F?e.jsx(m,{className:"h-64 w-full"}):e.jsx("div",{className:"h-64",children:e.jsx(h,{data:P,options:H})})})]}),e.jsxs(t,{children:[e.jsx(l,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Site Visitor Activity"})}),e.jsx(i,{children:N?e.jsx(m,{className:"h-64 w-full"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-64",children:e.jsx(x,{data:q,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:500,easing:"easeOutQuart"},interaction:{intersect:!1,mode:"index"},plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0,font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(71, 85, 105)"}},tooltip:{titleFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:13,weight:600},bodyFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:"normal"}}},scales:{x:{grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(100, 116, 139)"}},y:{grid:{display:!1},border:{display:!1},ticks:{font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(100, 116, 139)"}}}}})}),e.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Visitor totals count unique IP addresses accessing the app. Repeat visits from the same IP still count as a single visitor."})]})})]}),e.jsxs(t,{children:[e.jsx(l,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Monthly Books Borrowed"})}),e.jsx(i,{children:k?e.jsx(m,{className:"h-64 w-full"}):w&&w.length>0?e.jsx("div",{className:"h-64",children:e.jsx(h,{data:T,options:H})}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-500",children:[e.jsx(c,{className:"w-10 h-10 mb-3 opacity-40"}),e.jsx("p",{children:"No loan activity recorded in the selected period."})]})})]}),e.jsxs(t,{children:[e.jsx(l,{children:e.jsx(r,{className:"text-lg font-semibold text-slate-800",children:"Most Read by Category"})}),e.jsx(i,{children:L?e.jsx(m,{className:"h-64 w-full"}):e.jsx("div",{className:"h-64",children:e.jsx(g,{data:z,options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:400,easing:"easeOutQuart"},plugins:{legend:{position:"bottom",labels:{padding:15,usePointStyle:!0,font:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:500},color:"rgb(71, 85, 105)"}},tooltip:{titleFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:12,weight:600},bodyFont:{family:'Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',size:11,weight:"normal"}}}}})})})]})]})]})]})}b.register(u,y,j,f,v,N,w,k,S),b.defaults.font.family='Poppins, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif',b.defaults.font.size=12,b.defaults.font.weight="normal",b.defaults.color="rgb(71, 85, 105)";export{F as default};
